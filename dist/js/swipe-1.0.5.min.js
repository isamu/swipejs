"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,a){for(var i=0;i<a.length;i++){var t=a[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,i,t){return i&&e(a.prototype,i),t&&e(a,t),a}}(),MediaPlayer=function(){function e(){_classCallCheck(this,e),this.current_page=0,this.current_playing=null,this.media={}}return _createClass(e,[{key:"page",value:function(e){return this.current_page=e,this}},{key:"push",value:function(e){return this.media[this.current_page]||(this.media[this.current_page]=[]),this.media[this.current_page].push(e),this}},{key:"play",value:function(){return this.current_playing!=this.current_page&&(this.stop(),this.media[this.current_page]&&this.media[this.current_page].forEach(function(e,a){e.play()}),this.current_playing=this.current_page),this}},{key:"stop",value:function(){null!==this.current_playing&&this.media[this.current_playing]&&this.media[this.current_playing].forEach(function(e,a){e.stop()}),this.current_playing=null}}]),e}(),TestMedia=function(){function e(a){_classCallCheck(this,e),this.str=a}return _createClass(e,[{key:"play",value:function(){console.log("play"),console.log(this.str)}},{key:"stop",value:function(){console.log("stop"),console.log(this.str)}}]),e}(),media=new TestMedia("1"),media2=new TestMedia("2"),media3=new TestMedia("3"),media4=new TestMedia("4"),media_player=new MediaPlayer;media_player.page(1).push(media),media_player.page(1).push(media2),media_player.page(3).push(media3),media_player.page(3).push(media4),media_player.page(1).play(),media_player.page(2).play(),media_player.page(3).play(),media_player.page(2).play(),media_player.page(1).play(),media_player.page(2).play(),media_player.page(3).play(),media_player.page(4).play(),media_player.page(3).play(),media_player.page(3).play(),media_player.page(3).play();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),SwipeBook=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],a=this,s=arguments[2],n=arguments[3];_classCallCheck(this,e),$("head").prepend('<meta name="viewport" content="width = 640,user-scalable=no">'),this.first_touch=!1,this.data=t,this.title="Swipe",this.pages=[],this.base_css_id=s,this.back_css_id=n,this.media_player=SwipeMediaPlayer.getInstance(),this.finish_callback=null,"net.swipe.list"==t.type?!function(){var e=[];a.data.items.forEach(function(t,i){e.push('<li><a href="?file='+t.url+'">'+t.title+"</li>")}),$(s).html("<ul>"+e.join("")+"</ul>"),a.setScreen()}():(this.step=i,e.setTemplateElements(this.getTemplateElements()),e.setMarkdown(this.getMarkdown()),this.templatePages=this.getTemplatePages(),this.setScreen(),this.paging=this.getPaging(),this.isLoaded={},this.isReady=!1,this.isFinished=!1,this.load(),this.step>this.pages.length&&(this.step=this.pages.length-1),this.pages.length>0&&this.domLoad())}return _createClass(e,null,[{key:"setTemplateElements",value:function(e){this.templateElements=e}},{key:"getTemplateElements",value:function(){return this.templateElements}},{key:"setMarkdown",value:function(e){this.markdown=e}},{key:"getMarkdown",value:function(){return this.markdown}},{key:"pageInDuration",value:function(){return 400}}]),_createClass(e,[{key:"setScreen",value:function(){this.dimension=this.data.dimension?this.data.dimension:[$(window).width(),$(window).height()],SwipeScreen.init(this.dimension[0],this.dimension[1]),this.bc=this.data.bc||"#a9a9a9",this.setSwipeCss()}},{key:"load",value:function(){var e=this;$.each(this.data.pages,function(t,i){var a;i.scene&&(a=e.templatePages[i.scene])&&(a=e.templatePages[i.scene]),i.template&&(a=e.templatePages[i.template])?a=e.templatePages[i.template]:e.templatePages["*"]&&(a=e.templatePages["*"]);var s=new SwipePage(i,a,t);e.pages.push(s)}),this.data.title&&(this.title=this.data.title,document.title=this.title)}},{key:"getTemplatePages",value:function(){return this.data.templates&&this.data.templates.pages?this.data.templates.pages:this.data.scenes?this.data.scenes:{}}},{key:"getTemplateElements",value:function(){return this.data.templates&&this.data.templates.elements?this.data.templates.elements:this.data.elements?this.data.elements:{}}},{key:"getMarkdown",value:function(){return this.data.markdown?this.data.markdown:{}}},{key:"getPaging",value:function(){return"leftToRight"==this.data.paging||"vertical"==this.data.paging||"rightToLeft"==this.data.paging?this.data.paging:"vertical"}},{key:"setSwipeCss",value:function(){var e=($(window).width()-SwipeScreen.virtualwidth())/2;$("#loading").css({height:SwipeScreen.virtualheight(),width:SwipeScreen.virtualwidth(),"z-index":100,"background-color":"#fff",overflow:"hidden",position:"absolute",left:e}),$(this.base_css_id).css({height:SwipeScreen.virtualheight(),width:SwipeScreen.virtualwidth(),overflow:"hidden",position:"absolute",left:e});var t=SwipeScreen.getSize();$(this.back_css_id).css({"background-color":this.bc,height:t+"vh",width:"100vw"})}},{key:"resize",value:function(){this.setScreen();for(var e=0;e<this.pages.length;e++)this.pages[e].resize(),this.justShow(e);this.setPageSize()}},{key:"setPageSize",value:function(){$("svg").css("overflow","visible"),$(".page").css({overflow:"hidden",height:SwipeScreen.virtualheight(),width:SwipeScreen.virtualwidth()})}},{key:"pageLoad",value:function(e){var t=this,i=this.pages[e];i.loadElement(),this.loadingBasePage>e?$(this.base_css_id).prepend(i.getHtml()):$(this.base_css_id).append(i.getHtml()),e==this.loadingBasePage?($("#page_"+e).css("opacity",1),i.active()):$("#page_"+e).css("opacity",0);var a=i.getBc();$("#page_"+e).css({"background-color":a}),$(".image_element_page_"+e).load(function(){$(this).attr("__default_width",$(this).width()),$(this).attr("__default_height",$(this).height()),$("#"+$(this).attr("__base_id")).attr("__default_width",$(this).width()),$("#"+$(this).attr("__base_id")).attr("__default_height",$(this).height()),t.initData($(this).attr("__page_id"),$(this).attr("__element_id")),t.counterDecrease()}),$(".element_page_"+e).each(function(e,i){t.initData($(i).attr("__page_id"),$(i).attr("__element_id")),t.counterDecrease()}),$(".video_element_"+e).each(function(e,i){var a=t.pages[$(i).attr("__page_id")].getElement($(i).attr("__element_id")),s=new MediaElement($(i).attr("id")+"-video",{flashName:"flashmediaelement.swf",loop:!0,success:function(e,t){a.setVideoElement=e}});this.media_player=SwipeMediaPlayer.getInstance();var n={media:s,canPlay:!1,currentTime:0,dom:$("#"+$(i).attr("id")+"-video")[0]};a.videoStart&&(n.videoStart=a.videoStart),a.videoDuration&&(n.videoDuration=a.videoDuration),this.media_player.page($(i).attr("__page_id")).push($(i).attr("id"),n),t.counterDecrease()})}},{key:"domLoad",value:function(){this.loadingPage=this.step,this.loadingBasePage=this.step,this.loadingPageOffset=0,this.pageLoad(this.loadingPage),$("#debug").css({position:"absolute","z-index":100}),this.setPageSize(),this.updateCss()}},{key:"updateCss",value:function(){$(".page").css({position:"absolute"}),$(".image_element").css({position:"absolute"}),$(".image_box").css({position:"absolute"}),$(".element_inner").css({position:"relative",height:"100%",width:"inherit"}),$(".video_element").css({position:"absolute"}),$(".text_element").css({position:"absolute"}),$(".svg_element").css({position:"absolute"})}},{key:"nextLoadPage",value:function(){return void 0===this.pages[this.loadingBasePage+Math.abs(this.loadingPageOffset)]&&void 0===this.pages[this.loadingBasePage-Math.abs(this.loadingPageOffset)]?null:(this.loadingPageOffset=this.loadingPageOffset*-1,this.loadingPageOffset>-1&&this.loadingPageOffset++,this.pages[this.loadingBasePage+this.loadingPageOffset]?(this.loadingPage=this.loadingBasePage+this.loadingPageOffset,this.loadingPage):this.nextLoadPage())}},{key:"counterDecrease",value:function(){if(SwipeCounter.decrease(),$("#counter").html(SwipeCounter.getCounter()),0==SwipeCounter.getCounter()){this.loadingPage==this.step&&($("#loading").remove(),this.show(this.step)),this.isLoaded[this.loadingPage]=!0;var e=this.nextLoadPage();null!==e?(console.log("load ",e),this.pageLoad(e),this.setPageSize(),this.updateCss()):this.loadFinish(),console.log("OK!!!")}console.log(SwipeCounter.getCounter())}},{key:"loadFinish",value:function(){this.isReady=!0}},{key:"set_finish_callback",value:function(e){this.finish_callback=e}},{key:"initData",value:function(e,t){this.pages[e].initElement(t)}},{key:"next",value:function(){this.isLoaded[this.step+1]&&(this.step<this.pages.length-1?this.show(this.step+1):(this.isFinished=!0,this.finish_callback&&this.finish_callback(!0)))}},{key:"back",value:function(){this.isLoaded[this.step-1]&&this.step>0&&(this.show(this.step-1),this.isFinished&&(this.finish_callback&&this.finish_callback(!1),this.isFinished=!1))}},{key:"getStep",value:function(){return this.step}},{key:"getPages",value:function(){return this.pages}},{key:"getPageSize",value:function(){return this.pages.length}},{key:"justShow",value:function(e){this.pages[e].justShow()}},{key:"nextAnimate",value:function(e){var t=this.pages[e].getPlayStyle();"auto"==t?this.pages[e].delayShow():"scroll"==t?this.pages[e].show():"always"==t?this.pages[e].delayShow():"pause"==t&&this.pages[e].finShow()}},{key:"prevAnimate",value:function(e){var t=this.pages[e].getPlayStyle();"auto"==t?this.pages[e].finShow():"scroll"==t?this.pages[e].show():"always"==t?this.pages[e].delayShow():"pause"==t&&this.pages[e].finShow()}},{key:"show",value:function(t){var i=this.step,a=t>=i?"forward":"back",s=t==i;s||(this.pages[i].inactive(),this.pages[t].active()),!this.first_touch&&this.isReady&&(this.media_player.load(),this.first_touch=!0);var n=(this.pages[Math.max(i,t)].getTransition(),this.pages[i].getTransition()),p=this.pages[t].getTransition(),o=this;"forward"==a?(this.nextAnimate(t),"fadeIn"==p?$("#page_"+t).animate({opacity:1},{duration:e.pageInDuration()}):"replace"==p?$("#page_"+t).css({opacity:1}):"scroll"==p?this.pageSlide("in",t):console.log("wrong transition in step "+String(t)),s||("fadeIn"==n?$("#page_"+i).animate({opacity:0},{duration:e.pageInDuration()}):"replace"==n?setTimeout(function(){$("#page_"+i).css({opacity:0})},e.pageInDuration()):"scroll"==n&&this.pageSlide("out",i))):(console.log("back"),this.prevAnimate(t),"fadeIn"==p?($("#page_"+t).css({opacity:0}),$("#page_"+t).animate({opacity:1},{duration:e.pageInDuration()})):"replace"==p?("replace"==n?setTimeout(function(){$("#page_"+t).css({opacity:1})},e.pageInDuration()):$("#page_"+t).css({opacity:1}),setTimeout(function(){o.pages[t].doLoopProcess()},e.pageInDuration())):"scroll"==p&&"scroll"==n?($("#page_"+t).css({opacity:1}),this.pageSlide("out_back",t)):($("#page_"+t).css({top:0,left:0}),$("#page_"+t).css({opacity:1}),setTimeout(function(){o.pages[t].doLoopProcess()},e.pageInDuration())),"fadeIn"==n?($("#page_"+i).css({opacity:1}),$("#page_"+i).animate({opacity:0},{duration:e.pageInDuration()})):"replace"==n?(this.pages[i].back(),setTimeout(function(){$("#page_"+i).css({opacity:0})},e.pageInDuration())):"scroll"==n&&this.pageSlide("in_back",i)),s||("auto"==this.pages[t].getPlayStyle()&&(console.log("AUTO NEXT"),this.media_player.play(t)),"scroll"==this.pages[t].getPlayStyle()&&(console.log("scroll NEXT"),this.media_player.play(t))),s&&"auto"==this.pages[i].getPlayStyle()&&this.media_player.play(i),this.step=t,location.hash=t}},{key:"pageSlide",value:function(t,i){if(console.log("pageSlide"),"in"==t)$("#page_"+i).css("opacity",1),"vertical"==this.paging?($("#page_"+i).css("top",SwipeScreen.virtualheight()),$("#page_"+i).animate({top:0},{duration:e.pageInDuration()})):"leftToRight"==this.paging?($("#page_"+i).css("left",SwipeScreen.virtualwidth()),$("#page_"+i).animate({left:0},{duration:e.pageInDuration()})):"rightToLeft"==this.paging&&($("#page_"+i).css("left",-SwipeScreen.virtualwidth()),$("#page_"+i).animate({left:0},{duration:e.pageInDuration()}));else if("out"==t)"vertical"==this.paging?($("#page_"+i).css("top",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({top:-SwipeScreen.virtualheight()},{duration:e.pageInDuration()})):"leftToRight"==this.paging?($("#page_"+i).css("left",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:-SwipeScreen.virtualwidth()},{duration:e.pageInDuration()})):"rightToLeft"==this.paging&&($("#page_"+i).css("left",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:SwipeScreen.virtualwidth()},{duration:e.pageInDuration()})),setTimeout(function(){$("#page_"+i).css("opacity",0)},e.pageInDuration());else if("in_back"==t){var a={duration:e.pageInDuration(),complete:function(){$("#page_"+i).css({opacity:0})}};"vertical"==this.paging?($("#page_"+i).css("top",0),$("#page_"+i).animate({top:SwipeScreen.virtualheight()},a)):"leftToRight"==this.paging?($("#page_"+i).css("left",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:SwipeScreen.virtualwidth(),opacity:1},a)):"rightToLeft"==this.paging&&($("#page_"+i).css("left",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:-SwipeScreen.virtualwidth(),opacity:1},a)),setTimeout(function(){$("#page_"+i).css("opacity",0)},e.pageInDuration())}else if("out_back"==t){$("#page_"+i).css("opacity",1);var s={duration:e.pageInDuration()};"vertical"==this.paging?($("#page_"+i).css("top",-SwipeScreen.virtualheight()),$("#page_"+i).animate({top:0},s)):"leftToRight"==this.paging?($("#page_"+i).css("left",-SwipeScreen.virtualwidth()),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:0,opacity:1},s)):"rightToLeft"==this.paging&&($("#page_"+i).css("left",SwipeScreen.virtualwidth()),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:0,opacity:1},s))}}},{key:"view",value:function(e){var t=this.step+(e>0?1:-1),i=this.step,a=t>=i?"forward":"back";if(t<0||t>=this.pages.length)return 0;"forward"==a&&"scroll"==this.pages[t].getPlayStyle()&&this.media_player.playing(e),"back"==a&&"scroll"==this.pages[i].getPlayStyle()&&this.media_player.playing(e),"pause"==this.pages[t].getPlayStyle()&&this.pages[t].pause();var s=(this.pages[Math.max(i,t)].getTransition(),this.pages[i].getTransition()),n=this.pages[t].getTransition();"forward"==a?"fadeIn"==n?$("#page_"+t).css({opacity:e}):"replace"==n?$("#page_"+t).css({opacity:1}):"scroll"==n?this.pageSlide2("in",t,e):console.log("wrong transition in step "+String(t)):(console.log("back"),"fadeIn"==n&&$("#page_"+t).css({opacity:Math.abs(e)}),"fadeIn"==s?$("#page_"+i).css({opacity:1-Math.abs(e)}):"scroll"==s&&this.pageSlide2("in_back",i,e))}},{key:"nextStart",value:function(e){if(!this.first_touch&&this.isReady&&(this.media_player.load(),this.first_touch=!0),this.step+1>=this.pages.length)return this.isFinished=!0,this.finish_callback&&this.finish_callback(!0),0;var t=this.pages[this.step+1].getPlayStyle();this.pages[this.step+1].prevShow(),"scroll"==t&&($("#page_"+String(this.step+1)).css("opacity",1),this.pages[this.step+1].animateShow()),"auto"==this.pages[this.step+1].getPlayStyle()&&this.media_player.play(this.step+1),"scroll"==this.pages[this.step+1].getPlayStyle()&&this.media_player.play(this.step+1),"always"==this.pages[this.step+1].getPlayStyle()&&this.media_player.play(this.step+1),"pause"==this.pages[this.step+1].getPlayStyle()&&this.media_player.play(this.step+1)}},{key:"nextHide",value:function(){var e=this.step+1;return e>=this.pages.length?0:($("#page_"+e).css("opacity",0),void this.pages[e].finShow())}},{key:"nextEnd",value:function(){var e=this.step+1;if(e>=this.pages.length)return 0;$("#page_"+this.step).css("opacity",0),$("#page_"+e).css("top",0),$("#page_"+e).css("left",0),$("#page_"+e).css("opacity",1);var t=this.pages[e].getPlayStyle();"scroll"==t?this.pages[e].finShow():"auto"!=t&&"always"!=t||this.pages[e].show(),this.step=e,location.hash=e}},{key:"prevStart",value:function(e){if(console.log("prevStart"),this.step<=0)return 0;this.isFinished&&(this.finish_callback&&this.finish_callback(!1),this.isFinished=!1);var t=this.pages[this.step-1].getPlayStyle(),i=this.pages[this.step].getPlayStyle();$("#page_"+String(this.step-1)).css("opacity",1),"always"==t?(this.pages[this.step-1].prevShow(),this.media_player.play(this.step-1)):this.pages[this.step-1].finShow(),"scroll"==i&&(this.pages[this.step].finShow(),this.pages[this.step].animateShowBack())}},{key:"prevHide",value:function(){var e=this.step-1;return e<0?0:($("#page_"+e).css("opacity",0),void this.pages[e].finShow())}},{key:"prevEnd",value:function(){var e=this.step-1;if(e<0)return 0;$("#page_"+this.step).css("opacity",0),$("#page_"+e).css("opacity",1),$("#page_"+e).css("top",0),$("#page_"+e).css("left",0);var t=this.pages[e].getPlayStyle();"always"==t?this.pages[e].show():this.pages[e].finShow(),this.step=e,location.hash=e}},{key:"pageSlide2",value:function(t,i,a){"in"==t?($("#page_"+i).css("opacity",1),"vertical"==this.paging?$("#page_"+i).css("top",SwipeScreen.virtualheight()*(1-a)):"leftToRight"==this.paging?$("#page_"+i).css("left",SwipeScreen.virtualwidth()*(1-a)):"rightToLeft"==this.paging&&($("#page_"+i).css("left",-SwipeScreen.virtualwidth()),$("#page_"+i).animate({left:0},{duration:e.pageInDuration()}))):"out"==t?("vertical"==this.paging?($("#page_"+i).css("top",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({top:-SwipeScreen.virtualheight()},{duration:e.pageInDuration()})):"leftToRight"==this.paging?($("#page_"+i).css("left",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:-SwipeScreen.virtualwidth()},{duration:e.pageInDuration()})):"rightToLeft"==this.paging&&($("#page_"+i).css("left",0),$("#page_"+i).css("opacity",1),$("#page_"+i).animate({left:SwipeScreen.virtualwidth()},{duration:e.pageInDuration()})),setTimeout(function(){$("#page_"+i).css("opacity",0)},e.pageInDuration())):"in_back"==t?"vertical"==this.paging?$("#page_"+i).css("top",-SwipeScreen.virtualheight()*a):"leftToRight"==this.paging?($("#page_"+i).css("left",-SwipeScreen.virtualheight()*a),$("#page_"+i).css("opacity",1)):"rightToLeft"==this.paging&&($("#page_"+i).css("left",SwipeScreen.virtualheight()*a),$("#page_"+i).css("opacity",1)):"out_back"==t&&($("#page_"+i).css("opacity",1),"vertical"==this.paging?$("#page_"+i).css("top",SwipeScreen.virtualheight()*(-a-1)):"leftToRight"==this.paging?($("#page_"+i).css("left",SwipeScreen.virtualwidth()*(-a-1)),$("#page_"+i).css("opacity",1)):"rightToLeft"==this.paging&&($("#page_"+i).css("left",SwipeScreen.virtualwidth()*(-a-1)),$("#page_"+i).css("opacity",1)))}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),SwipeCounter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"increase",value:function(){return void 0===this.counter?this.counter=1:this.counter++,this.counter}},{key:"decrease",value:function(){return void 0===this.counter?this.counter=-1:this.counter--,this.counter}},{key:"getCounter",value:function(){return this.counter}}]),e}();
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol?"symbol":typeof i},_createClass=function(){function i(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}return function(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}}(),SwipeElement=function(){function i(t,e,s,n,o){var a=arguments.length<=5||void 0===arguments[5]?null:arguments[5];_classCallCheck(this,i);var h="element-"+e+"-"+s;this.info=this.mergeTemplate(t),this.to_info=this.info.to?SwipeUtil.merge(this.info,this.info.to):null,this.css_id=h,this.page_id=e,this.element_id=s,this.play_style=n,this.duration=o,this.parent=a,this.isActive=!1,this.videoStart=0,this.videoDuration=null,this.isRepeat=Boolean(t.repeat),this.x=0,this.y=0,this.angle=this.info.rotate?this.getAngle(this.info.rotate):0,this.to_angle=this.to_info&&this.to_info.rotate?this.getAngle(this.to_info.rotate):0,this.scale=this.getScale(this.info),this.to_scale=this.to_info?this.getScale(this.to_info):[1,1],this.no_size=!1,this.transition_timing=null,this.loop_timing=null,this.elements=[];var r=this;this.bc=null,this.info.bc&&(this.bc=this.info.bc),this.info.elements&&this.info.elements.forEach(function(t,a){var h=s+"-"+a;r.elements.push(new i(t,e,h,n,o,r))})}return _createClass(i,[{key:"mergeTemplate",value:function(i){if(i.element||i.template){var t,e=SwipeBook.getTemplateElements();(t=e[i.element||i.template])&&(i=SwipeParser.inheritProperties(i,t))}return i}},{key:"parseText",value:function(i){return"string"==typeof i?i:"object"==("undefined"==typeof i?"undefined":_typeof(i))?i.ref?SwipeParser.localizedStringForKey(i.ref):SwipeParser.localizedString(i,"ja"):""}},{key:"parseMarkdown",value:function(i){var t=SwipeBook.getMarkdown(),e=new SwipeMarkdown(t);return e.parse(i,this.css_id)}},{key:"getElement",value:function(i){if(void 0!==i){var t=i.split("-");return 1==t.length?this.elements[i]:this.elements[t.shift()].getElement(t.join("-"))}return this}},{key:"initData",value:function(i){if(void 0!==i){var t=i.split("-");return void(1==t.length?this.elements[i].initData():this.elements[t.shift()].initData(t.join("-")))}(this.isDiv()||this.isMarkdown())&&(this.parent||$("#"+this.css_id).css("position","absolute")),this.isPath()&&(this.snap=Snap("#"+this.css_id+"_svg"),this.path=this.snap.path()),this.isVideo()&&this.initVideo(),this.setSize(),this.setPosition(),this.setOption(),$("#"+this.css_id).attr("__x",this.x),$("#"+this.css_id).attr("__y",this.y),$("#"+this.css_id).attr("__w",this.w),$("#"+this.css_id).attr("__h",this.h),this.bc&&$("#"+this.css_id).css({"background-color":this.bc}),this.isImage()&&this.setImageCss(),this.initAllData(),this.isPath()&&(this.prevPath=this.parsePath(),this.finPath=this.parseFinPath()),this.setPrevPos(),this.markdown_position()}},{key:"setImageCss",value:function(){var i=this.w/this.h,t=$("#"+this.css_id+"_image").attr("__default_width"),e=$("#"+this.css_id+"_image").attr("__default_height"),s=t/e;i<s?($("#"+this.css_id+"_image").css("height","100%"),$("#"+this.css_id+"_image").css("width","auto")):($("#"+this.css_id+"_image").css("height","auth"),$("#"+this.css_id+"_image").css("width","100%")),$("#"+this.css_id+"_image").css("top","50%"),$("#"+this.css_id+"_image").css("left","50%"),$("#"+this.css_id+"_image").css("transform","translate(-50%,-50%)"),$("#"+this.css_id+"_image").css("-webkit-transform","translateY(-50%) translateX(-50%)"),$("#"+this.css_id+"_image").css("-moz-transform","translate(-50%,-50%)")}},{key:"initAllData",value:function(){this.initPosData=[Number(this.x),Number(this.y),Number(this.w),Number(this.h),Number(this.angle),Number(this.opacity),this.scale],this.isText(),this.originalPrevPos=this.updatePosition(this.initPosData,this.info),this.prevPos=this.getScreenPosition(this.originalPrevPos),this.originalFinPos=this.getOriginalFinPos(),this.finPos=this.getScreenPosition(this.originalFinPos),this.isText()&&(this.prevText=this.textLayout(this.info,this.originalPrevPos),this.finText=this.textLayout(this.info,this.originalFinPos))}},{key:"getOriginalFinPos",value:function(){if(this.hasTo()){var i=this.initPosData;return this.info.to.pos&&this.info.to.pos.match(/^M/),this.updatePosition(i,this.to_info)}return this.originalPrevPos}},{key:"path2pos",value:function(i){var t=[0,0],e=i.match(/(\w[0-9\s\.,\-]+)/g);return $.each(e,function(i,e){var s=e.slice(0,1),n=e.slice(1).split(",");"M"==s&&(t=[Number(n[0]),Number(n[1])]),"l"==s&&(t=[Number(t[0])+Number(n[0]),Number(t[1])+Number(n[1])])}),t}},{key:"setOption",value:function(){this.opacity=1,null!=this.info.opacity&&(this.opacity=this.info.opacity),this.info.clip&&this.info.clip===!0&&$("#"+this.css_id).css("overflow","hidden")}},{key:"initVideo",value:function(){this.videoStart=0,this.info.videoStart&&(this.videoStart=this.info.videoStart),this.videoDuration=1,this.info.videoDuration&&(this.videoDuration=this.info.videoDuration)}},{key:"setSize",value:function(){this.info.size?(this.w=this.info.size[0],this.h=this.info.size[1]):(this.info.w?this.w=SwipeParser.parseSize(this.info.w,this.getWidth(),this.getWidth()):this.isImage()?this.w=$("#"+this.css_id).attr("__default_width"):(this.w=this.parentWidth(),this.no_size=!0),this.info.h?this.h=SwipeParser.parseSize(this.info.h,this.getHeight(),this.getHeight()):this.isImage()?this.h=$("#"+this.css_id).attr("__default_height"):(this.h=this.parentHeight(),this.no_size=!0))}},{key:"setPosition",value:function(){this.info.pos?(this.x=this.info.pos[0],this.y=this.info.pos[1]):("right"==this.info.x?this.x=this.parentWidth()-this.w:"left"==this.info.x?this.x=0:"center"==this.info.x?this.x=(this.parentWidth()-this.w)/2:this.info.x&&(this.x=SwipeParser.parseSize(this.info.x,this.parentWidth(),0)),"bottom"==this.info.y?this.y=this.parentHeight()-this.h:"top"==this.info.y?this.y=0:"center"==this.info.y?this.y=(this.parentHeight()-this.h)/2:this.info.y&&(this.y=SwipeParser.parseSize(this.info.y,this.parentHeight(),0)))}},{key:"getAngle",value:function(i){return SwipeParser.is("Array",i)?i[2]:i?i:0}},{key:"getWidth",value:function(){return this.w?this.w:this.parent?this.parent.getWidth():SwipeScreen.swipewidth()}},{key:"getHeight",value:function(){return this.h?this.h:this.parent?this.parent.getHeight():SwipeScreen.swipeheight()}},{key:"parentWidth",value:function(){var i;return this.parent&&(i=this.parent.getWidth()),i?i:SwipeScreen.swipewidth()}},{key:"parentHeight",value:function(){var i;return this.parent&&(i=this.parent.getHeight()),i?i:SwipeScreen.swipeheight()}},{key:"setVideo",value:function(i){$("#"+this.css_id+"-video").css(this.convCssPos(i,!0))}},{key:"getSpritePos",value:function(){var i=this.prevPos[2],t=this.prevPos[3];return[-(i*this.info.slot[0]),-(t*this.info.slot[1]),i*this.info.slice[0],t*this.info.slice[1]]}},{key:"getSpriteCss",value:function(i){return{left:i[0],top:i[1],width:i[2],height:i[3]}}},{key:"setSpritePos",value:function(i){$("#"+this.css_id+"_sprite").css(this.getSpriteCss(i))}},{key:"prevShow",value:function(){this.elements&&this.elements.forEach(function(i,t){i.prevShow()}),this.setPrevPos()}},{key:"setPrevPos",value:function(){var i=this;if($("#"+this.css_id).css(this.convCssPos(this.prevPos)),this.isVideo()&&this.setVideo(this.prevPos),this.isSprite()){var t=this.getSpritePos();this.setSpritePos(t)}this.isText()&&$("#"+this.css_id+"-body").css(this.prevText),this.isPath()&&(this.path.attr(this.prevPath.path),this.path.attr({fill:this.prevPath.fill})),this.isMarkdown()&&this.md_css.forEach(function(t,e){$("#"+i.css_id+"-"+e).css(t)})}},{key:"textLayout",value:function(i,t){var e="center",s="center";if(i.textAlign)switch(i.textAlign){case"left":s="left";break;case"right":s="right";break;case"top":e="top";break;case"bottom":e="bottom"}var n=SwipeParser.parseFontName(i,!1),o=function(i,t){var e=20/480*SwipeScreen.swipeheight(),s=SwipeParser.parseFontSize(i,SwipeScreen.swipeheight(),e,!1);return Math.round(s*Math.abs(t[1]))}(i,t[6]),a=o,h=t[3],r=0;if("bottom"==e)r=h-a;else if("center"==e)return{position:"relative",top:"0px","font-size":String(SwipeScreen.virtualY(o))+"px","line-height":String(SwipeScreen.virtualY(Math.abs(1.5*o)))+"px","font-family":n,textAlign:s,width:"inherit",display:"table-cell","vertical-align":"middle",height:String(SwipeScreen.virtualY(h))+"px",color:this.conv_rgba2rgb(SwipeParser.parseColor(i,"#000"))};return{position:"relative",top:String(SwipeScreen.virtualY(r))+"px","font-size":String(SwipeScreen.virtualY(o))+"px","line-height":String(SwipeScreen.virtualY(Math.abs(1.5*o)))+"px","font-family":n,textAlign:s,color:this.conv_rgba2rgb(SwipeParser.parseColor(i,"#000"))}}},{key:"conv_rgba2rgb",value:function(i){var t=void 0;return(t=i.match(/^(#\w{6})(\w{2})$/))?t[1]:i}},{key:"transformPath",value:function(i,t){var e=[],s=[SwipeScreen.getRation(),SwipeScreen.getRation()],n=[],o=Math.abs(t[0]),a=Math.abs(t[1]);n=[s[0]*o,s[1]*a];var h=0,r=0;return!t||1==o&&1==a||(h=(1-o)*this.prevPos[2]/2,r=(1-a)*this.prevPos[3]/2,e.push("translate("+String(h)+","+String(r)+")")),e.push("scale("+n.join(",")+")"),e.join(" ")}},{key:"parsePath",value:function(){var i=this.info.lineWidth?this.info.lineWidth:1,t=this.info.strokeColor?this.info.strokeColor:"black",e=this.info.fillColor?"#0000"==this.info.fillColor?"none":this.info.fillColor:"none";return{path:{d:this.info.path,transform:this.transformPath(this.info,this.scale),stroke:this.conv_rgba2rgb(t),strokeWidth:i},fill:this.conv_rgba2rgb(e)}}},{key:"parseFinPath",value:function(){if(!this.hasTo())return this.prevPath;var i=SwipeUtil.merge(this.info,this.info.to),t=i.lineWidth?i.lineWidth:1,e=i.strokeColor?i.strokeColor:"black",s=i.fillColor?"#0000"==i.fillColor?"none":i.fillColor:"none";i.rotate?[i.rotate[2],this.prevPos[2]/2,this.prevPos[3]/2].join(","):"0,0,0";return{path:{d:i.path,transform:this.transformPath(i,this.getScale(i)),stroke:this.conv_rgba2rgb(e),strokeWidth:t},fill:this.conv_rgba2rgb(s)}}},{key:"animatePrevPos",value:function(){if(this.hasTo()){var i=this;if($("#"+i.css_id).animate(i.convCssPos(i.prevPos),{duration:this.duration,progress:function(t,e){i.animateTransform(1-e),i.isPath()&&$("#"+i.css_id).css("overflow","visible")}}),this.isText()&&$("#"+this.css_id+"-body").animate(this.prevText,{duration:this.duration}),this.isPath()){var t=SwipeParser.clone(this.prevPath.path);delete t.stroke,this.path.animate(t,this.duration),this.prevPath.fill!=this.finPath.fill&&this.path.attr({fill:this.prevPath.fill})}}}},{key:"markdown_position",value:function(){if(this.isMarkdown()){var i=($("#"+this.css_id).height()-$("#md_"+this.css_id).height())/2;$("#md_"+this.css_id).css({top:i,position:"absolute"})}}},{key:"setFinPos",value:function(){if($("#"+this.css_id).css(this.convCssPos(this.finPos)),this.isVideo()&&this.setVideo(this.finPos),this.isText()){var i=this.textLayout(this.info,this.originalFinPos);$("#"+this.css_id+"-body").css(i)}this.isPath()&&(this.path.attr(this.finPath.path),this.path.attr({fill:this.finPath.fill}))}},{key:"animateTransform",value:function(i){var t=[];if(this.angle!=this.to_angle){var e=this.angle*(1-i)+this.to_angle*i;t.push("rotate("+e+"deg)")}else t.push("rotate("+this.angle+"deg)");if(!this.isPath())if(this.scale!=this.to_scale){var s=[this.scale[0]*(1-i)+this.to_scale[0]*i,this.scale[1]*(1-i)+this.to_scale[1]*i];t.push("scale("+s[0]+", "+s[1]+")")}else t.push("scale("+this.scale[0]+", "+this.scale[1]+")");$("#"+this.css_id).css(this.getTransform(t))}},{key:"animateFinPos",value:function(){if(this.hasTo()){this.transition_timing=this.getTiming(this.info.to,this.duration);var i=this.transition_timing[0],t=this.transition_timing[1];console.log(t);var e=this;setTimeout(function(){if($("#"+e.css_id).animate(e.convCssPos(e.finPos),{duration:t,progress:function(i,t){e.animateTransform(t),e.isPath()&&$("#"+e.css_id).css("overflow","visible")}}),e.isVideo()&&$("#"+e.css_id+"-video").animate(e.convCssPos(e.finPos),{duration:t}),e.isText()&&$("#"+e.css_id+"-body").animate(e.finText,{duration:t}),e.isPath()){var i=SwipeParser.clone(e.finPath.path);delete i.stroke,e.path.animate(i,t),e.prevPath.fill!=e.finPath.fill&&setTimeout(function(){e.path.attr({fill:e.finPath.fill})},t)}},i)}}},{key:"animateShow",value:function(i){if(console.log("animateShow"),this.elements&&this.elements.forEach(function(t,e){t.animateShow(i)}),this.hasTo()){var t=this;if($("#"+t.css_id).animate(t.convCssPos(t.finPos),{duration:1e8,step:function(i){"stop"==SwipeTouch.getStatus()&&$(this).stop(0)},easing:"swipe",progress:function(i,e){t.animateTransform(SwipeUtil.getRation()),t.isPath()&&$("#"+t.css_id).css("overflow","visible")}}),t.isVideo()&&$("#"+t.css_id+"-video").animate(t.convCssPos(t.finPos),{duration:1e8,step:function(i){"stop"==SwipeTouch.getStatus()&&$(this).stop(0)},easing:"swipe"}),t.isPath()){var e=SwipeParser.clone(t.finPath.path);delete e.stroke,t.path.animate(e,1e8,function(i,t,e,s,n){return Math.abs(SwipeUtil.getRation())},function(){t.prevPath.fill!=t.finPath.fill&&t.path.attr({fill:t.finPath.fill})})}}}},{key:"animateShowBack",value:function(i){if(console.log("animateShowBack"),this.elements&&this.elements.forEach(function(t,e){t.animateShowBack(i)}),this.hasTo()){var t=this;if($("#"+t.css_id).animate(t.convCssPos(t.prevPos),{duration:1e8,step:function(i){"stop"==SwipeTouch.getStatus()&&$(this).stop(0)},easing:"swipe",progress:function(i,e){t.animateTransform(Math.abs(1+SwipeUtil.getRation())),t.isPath()&&$("#"+t.css_id).css("overflow","visible")}}),this.isPath()){var e=SwipeParser.clone(this.prevPath.path);delete e.stroke,this.path.animate(e,1e8,function(i,t,e,s,n){return Math.abs(SwipeUtil.getRation())},function(){this.prevPath.fill!=this.finPath.fill&&this.path.attr({fill:this.prevPath.fill})})}}}},{key:"pause",value:function(){this.elements&&this.elements.forEach(function(i,t){i.pause()}),this.isVideo()&&$("#"+this.css_id+"-video")[0].pause()}},{key:"updatePosition",value:function(i,t){var e=Object.assign({},i);if(t.translate){var s=t.translate;e[0]=e[0]+Number(s[0]),e[1]=e[1]+Number(s[1])}return e[4]=this.getAngle(t.rotate),null!=t.opacity&&(e[5]=Number(t.opacity)),t.scale&&(e[6]=this.getScale(t)),e}},{key:"getScreenPosition",value:function(i){return[SwipeScreen.virtualX(i[0]),SwipeScreen.virtualY(i[1]),SwipeScreen.virtualX(i[2]),SwipeScreen.virtualY(i[3]),i[4],i[5],i[6]]}},{key:"getScale",value:function(i){var t=arguments.length<=1||void 0===arguments[1]?[1,1]:arguments[1];return i.scale&&(SwipeParser.is("Array",i.scale)&&2==i.scale.length?t=i.scale:SwipeParser.is("Array",i.scale)&&4==i.scale.length?t=[i.scale[2],i.scale[3]]:SwipeParser.is("Number",i.scale)?t=[i.scale,i.scale]:SwipeParser.is("String",i.scale)&&(t=[Number(i.scale),Number(i.scale)])),t}},{key:"convBasicCssPos",value:function(i){return{left:i[0]+"px",top:i[1]+"px",width:i[2]+"px",height:i[3]+"px",opacity:i[5]}}},{key:"convCssPos",value:function(i){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=this.convBasicCssPos(i),s=[],n=i[4];if(isFinite(n)&&s.push("rotate("+n+"deg)"),!this.isPath()&&!t){var o=i[6];SwipeParser.is("Array",o)&&2==o.length&&s.push("scale("+o[0]+","+o[1]+")")}return s.length>0&&(e=this.setTransform(e,s)),e}},{key:"setTransform",value:function(i,t){return t&&t.length>0?SwipeUtil.merge(i,this.getTransform(t)):i}},{key:"getTransform",value:function(i){var t={},e=i.join(" ");return t.transform=e,t["-moz-transform"]=e,t["-webkit-transform"]=e,t["-o-transform"]=e,t["-ms-transform"]=e,t}},{key:"type",value:function(){return this.info.img?"image":this.info.sprite?"sprite":this.info.video?"video":this.info.text?"text":this.info.markdown?"markdown":this.info.path?"path":"div"}},{key:"isImage",value:function(){return"image"==this.type()}},{key:"isSprite",value:function(){return"sprite"==this.type()}},{key:"isVideo",value:function(){return"video"==this.type()}},{key:"isText",value:function(){return"text"==this.type()}},{key:"isMarkdown",value:function(){return"markdown"==this.type()}},{key:"isPath",value:function(){return"path"==this.type()}},{key:"isDiv",value:function(){return"div"==this.type()}},{key:"hasTo",value:function(){return!!this.info.to}},{key:"html",value:function(){this.type()&&(SwipeCounter.increase(),this.isVideo()&&SwipeCounter.increase());var i=this.elements.map(function(i,t){return i.html()}).join("");if(this.isImage())return"<div id='"+this.css_id+"' class='image_box'><div id='"+this.css_id+"_inner' class='element_inner'><img src='"+this.info.img+"' class='image_element image_element_page_"+this.page_id+"' id='"+this.css_id+"_image' __page_id='"+this.page_id+"' __element_id='"+this.element_id+"' __base_id='"+this.css_id+"' >"+i+"</img></div></div>";if(this.isSprite())return"<div id='"+this.css_id+"' class='image_box'><div id='"+this.css_id+"_inner' class='element_inner'><img src='"+this.info.sprite+"' class='image_element image_element_page_"+this.page_id+"' id='"+this.css_id+"_sprite' __page_id='"+this.page_id+"' __element_id='"+this.element_id+"' __base_id='"+this.css_id+"' >"+i+"</img></div></div>";if(this.isText()){var t=this.defaultAttr("element text_element element_page_"+this.page_id),e=this.getAttrStr(t);return"<div "+e+"><div id='"+this.css_id+"_inner' class='element_inner'><div class='text_body' id='"+this.css_id+"-body'><span>"+this.parseText(this.info.text)+i+"</span></div></div></div>"}if(this.isMarkdown()){var s=this.parseMarkdown(this.info.markdown);return this.md_css=s[1],"<div class='element markdown_element element_page_"+this.page_id+"'  id='"+this.css_id+"' __page_id='"+this.page_id+"' __element_id='"+this.element_id+"' ><div id='"+this.css_id+"_inner' class='element_inner'><div class='markdown_wrap' id='md_"+this.css_id+"'>"+s[0]+i+"</div></div></div>"}if(this.isVideo()){var t=this.defaultAttr("element video_element element_page_"+this.page_id+" video_element_"+this.page_id),e=this.getAttrStr(t);return"<div "+e+"><div id='"+this.css_id+"_inner' class='element_inner'><video id='"+this.css_id+"-video'  webkit-playsinline playsinline muted><source type='video/mp4' src='"+this.info.video+"'  /></video>"+i+"</div></div>"}return this.isPath()?'<div id="'+this.css_id+'" __page_id="'+this.page_id+'" __element_id="'+this.element_id+'" class="element svg_element element_page_'+this.page_id+'"><div id="'+this.css_id+'_inner" class="element_inner"><svg id="'+this.css_id+'_svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"></svg></div></div>':this.isDiv()?"<div class='element boxelement-"+this.page_id+" element_page_"+this.page_id+"' id='"+this.css_id+"' __page_id='"+this.page_id+"' __element_id='"+this.element_id+"' >"+i+"</div>":""}},{key:"defaultAttr",value:function(i){var t={};return t.class=i,t.id=this.css_id,t.__page_id=this.page_id,t.__element_id=this.element_id,t}},{key:"getAttrStr",value:function(i){return Object.keys(i).map(function(t){return t+"='"+i[t]+"'"}).join(" ")}},{key:"resize",value:function(){this.elements&&this.elements.forEach(function(i,t){i.resize()}),this.isImage()&&this.setImageCss(),this.initAllData(),this.isPath()&&(this.prevPath=this.parsePath(),this.finPath=this.parseFinPath()),this.markdown_position()}},{key:"justShow",value:function(){console.log("justShow"),this.elements&&this.elements.forEach(function(i,t){i.justShow()}),this.no_size&&this.setSize(),this.setFinPos()}},{key:"show",value:function(){console.log("show"),this.elements&&this.elements.forEach(function(i,t){i.show()}),this.setPrevPos(),this.animateFinPos(),this.loopProcess()}},{key:"delayShow",value:function(){console.log("delayShow"),this.elements&&this.elements.forEach(function(i,t){i.delayShow()}),this.setPrevPos();var i=this;setTimeout(function(){i.animateFinPos(),i.loopProcess()},SwipeBook.pageInDuration())}},{key:"doLoopProcess",value:function(){console.log("show"),this.elements&&this.elements.forEach(function(i,t){i.doLoopProcess()}),this.loopProcess()}},{key:"getTiming",value:function(i,t){var e=function(i){if(i.timing){var t=i.timing;if(2==t.length&&t[0]>0&&t[1]>=t[0]&&t[1]<=1)return t}return[0,1]}(i);return[e[0],e[1]-e[0],1-e[1]].map(function(i){return i*t})}},{key:"getLoopDuration",value:function(i){var t=i;return this.transition_timing&&0!=this.transition_timing[2]&&(t=this.transition_timing[2]),this.valueFrom(this.info.loop,"duration",t)}},{key:"loopProcess",value:function(){if(this.info.loop){var i=this.getLoopDuration(this.duration);if(this.loop_timing=this.getTiming(this.info.loop,i),"scroll"!=this.play_style&&this.hasTo())if("auto"==this.play_style||"always"==this.play_style){var t=this.duration;this.transition_timing&&(t-=this.transition_timing[2]);var e=this;e.loop(e,null,t)}else console.log("not animate because "+this.play);else this.loop(this)}}},{key:"moreloop",value:function(i,t,e){t--;var s=this.loop_timing[2];setTimeout(function(){t>0?i.loop(i,t):i.isRepeat&&i.isActive&&(t=e,i.loop(i,t))},s)}},{key:"loop",value:function(i){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],e=arguments.length<=2||void 0===arguments[2]?0:arguments[2];console.log("loop");var s,n=i.info.loop,o=this.loop_timing[0],a=this.loop_timing[1];s=n.count?n.count:1,null==t&&(t=s);var h="#"+i.css_id+"_inner";if(setTimeout(function(){switch(n.style){case"vibrate":var e=i.valueFrom(n,"delta",10),o=i.originalFinPos,r=a/s/4;$(h).animate({left:parseInt(SwipeScreen.virtualX(-e))+"px"},{duration:r,complete:function(){$(h).animate({left:parseInt(SwipeScreen.virtualX(e))+"px"},{duration:2*r,complete:function(){$(h).animate({left:"0px"},{duration:r,complete:function(){t--,t>0?i.loop(i,t):i.isRepeat&&i.isActive&&(t=s,i.loop(i,t))}})}})}});break;case"shift":var l,o=i.originalFinPos;switch(n.direction){case"n":l={top:SwipeScreen.virtualY(-i.h)+"px"};break;case"e":l={left:parseInt(SwipeScreen.virtualX(i.w))+"px"};break;case"w":l={left:parseInt(SwipeScreen.virtualX(-i.w))+"px"};break;default:l={top:SwipeScreen.virtualY(i.h)+"px"}}var r=a/s;i.setPrevPos(),$(h).animate(l,{duration:r,complete:function(){$(h).animate(i.convCssPos(o),{duration:0,complete:function(){i.moreloop(i,t,s)}})}});break;case"blink":console.log("blink");var r=a/s/4;$(h).css({opacity:1}),setTimeout(function(){$(h).css({opacity:0}),setTimeout(function(){$(h).css({opacity:1}),setTimeout(function(){i.moreloop(i,t,s)},r)},2*r)},r);break;case"spin":console.log("spin");var r=a/s;$(h).rotate({angle:0,animateTo:360,duration:r,callback:function(){i.moreloop(i,t,s)}});break;case"wiggle":console.log("wiggle");var c=i.valueFrom(n,"delta",15),r=a/s/4;$(h).rotate({angle:0,animateTo:c,duration:r,callback:function(){$(h).rotate({angle:c,animateTo:-c,duration:2*r,callback:function(){$(h).rotate({angle:-c,animateTo:0,duration:r,callback:function(){i.moreloop(i,t,s)}})}})}});break;case"path":}},o+e),"sprite"==n.style){console.log("sprite");var r=i.valueFrom(n,"repeat")||i.valueFrom(n,"count");if(i.info.slice)for(var l=i.info.slice[0],c=a/r/l,u=0;u<r;u++)for(var p=function(t){$("#"+i.css_id+"_sprite").delay(c).queue(function(){var e=i.getLoopSpritePos(t);$(this).css(i.getSpriteCss(e)).dequeue()})},f=0;f<l;f++)p(f)}}},{key:"getLoopSpritePos",value:function(i){var t=this.prevPos[2],e=this.prevPos[3];return[-(t*i),-(e*this.info.slot[1]),t*this.info.slice[0],e*this.info.slice[1]]}},{key:"valueFrom",value:function(i,t,e){return i[t]?i[t]:e}},{key:"back",value:function(){console.log("back"),this.elements&&this.elements.forEach(function(i,t){i.back()}),this.setFinPos(),this.animatePrevPos()}},{key:"finShow",value:function(){console.log("finShow"),this.elements&&this.elements.forEach(function(i,t){i.finShow()}),this.setFinPos(),this.loopProcess()}},{key:"setVideoElement",value:function(i){this.videoElement=i}},{key:"inactive",value:function(){this.elements&&this.elements.forEach(function(i,t){i.inactive()}),this.isActive=!1}},{key:"active",value:function(){this.elements&&this.elements.forEach(function(i,t){i.active()}),this.isActive=!0}}]),i}();
"use strict";function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),SwipeMarkdown=function(){function e(n){_classCallCheck(this,e),this.info=n,this.setMdStyle(),this.info.styles&&(this.md_style=$.extend(!0,this.md_style,this.info.styles)),this.info.shadow&&(this.shadow=this.info.shadow)}return _createClass(e,[{key:"parse",value:function(e,n){var t=this,i=!1,r=e.map(function(e,n){return"```"===e?(i=!i,i?[null,""]:["```+",""]):i?["```",e]:t.getMdSymbol(e)}),s=[],a=[];return r.forEach(function(e,i){var r=e[0],o=e[1];t.prefixes(r)&&(o=t.prefixes(r)+o),s.push(t.conv_html(o,n,i)),a.push(t.conv_css(r))}),[s.join(""),a]}},{key:"conv_html",value:function(e,n,t){var i=e.replace(/\s/g,"&nbsp;");return"<div class='markdown_line' id='"+n+"-"+t+"'>"+i+"</div>"}},{key:"conv_css",value:function(e){var n=this.md_style[e],t=20,i=30,r="",s="left";n&&(n.font&&(n.font.name&&(r=SwipeParser.parseFontName(n.font,!0)),n.font.size&&(t=SwipeParser.parseFontSize(n.font,SwipeScreen.swipeheight(),10,!0),i=t)),n.alignment&&(s=n.alignment),i+=n.spacing?SwipeParser.parseSize(n.spacing,SwipeScreen.swipeheight(),10):10);var a={position:"relative","font-size":String(SwipeScreen.virtualY(t))+"px","line-height":String(SwipeScreen.virtualY(i))+"px","font-family":r,textAlign:s,color:SwipeParser.parseColor(n,"#000")};return this.shadow&&(a["text-shadow"]=SwipeParser.parseShadow(this.shadow),console.log(a["text-shadow"])),a}},{key:"setMdStyle",value:function(){var e;this.md_style=(e={"###":{color:"#800",font:{size:"4%",name:"Helvetica"}},"#":{font:{size:32},spacing:16},"##":{font:{size:28},spacing:14}},_defineProperty(e,"###",{font:{size:24},spacing:12}),_defineProperty(e,"####",{font:{size:22},spacing:10}),_defineProperty(e,"*",{font:{size:20},spacing:10}),_defineProperty(e,"-",{font:{size:20},spacing:5}),_defineProperty(e,"```",{font:{size:14,name:"Courier"},spacing:0}),_defineProperty(e,"```+",{font:{size:7,name:"Courier"},spacing:0}),e)}},{key:"getMdStyle",value:function(){return this.md_style}},{key:"getMdSymbol",value:function(e){var n=this.getMdStyle(),t=e.split(" ");if(t.length>1&&n[t[0]]){var i=t.shift();return[i,t.join(" ")]}return["*",e]}},{key:"prefixes",value:function(e){var n=this.md_style[e];if(n&&n.prefix)return n.prefix;var t={"-":"â€¢ ","```":" "};return e&&t.hasOwnProperty(e)?t[e]:null}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),SwipeMediaPlayer=function(){function e(){_classCallCheck(this,e),this.current_page=0,this.current_playing=null,this.media={}}return _createClass(e,null,[{key:"getInstance",value:function(){return this.instance?this.instance:(this.instance=new e,this.instance)}}]),_createClass(e,[{key:"page",value:function(e){return this.current_page=e,this}},{key:"push",value:function(e,t){return this.media[this.current_page]||(this.media[this.current_page]={}),this.media[this.current_page][e]=t,this}},{key:"play",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];e&&(this.current_page=e);var t=this;if(this.current_playing!=this.current_page){if(this.stop(),this.media[this.current_page]){var e=this.media[this.current_page];Object.keys(e).forEach(function(i){var a=e[i],n=a.media,r=0;if(e[i]&&e[i].videoStart&&(r=e[i].videoStart,n.setCurrentTime(r)),a.canPlay?(n.play(),n.addEventListener("ended",function(){t.current_playing=null})):(a.waitPlay=!0,t.media[t.current_page][i]=a),e[i]&&e[i].videoDuration){var u=e[i].videoDuration;setTimeout(function(){n.currentTime+1>Number(r)+Number(u)&&n.stop()},1e3*u)}})}this.current_playing=this.current_page}return this}},{key:"playing",value:function(e){e<0&&(e=1+e);var t=this;if(this.media[this.current_page]){var i=this.media[this.current_page];Object.keys(i).forEach(function(a){var n=i[a],r=(n.media,i[a].dom),u=u=i[a]&&i[a].videoStart?i[a].videoStart:0,c=i[a]&&i[a].videoDuration?i[a].videoDuration:1,s=u+e*c;Math.abs(n.currentTime-s)>.05&&(r.currentTime=s,n.currentTime=s,t.media[t.current_page][a]=n)})}}},{key:"load",value:function(){var e=this;Object.keys(this.media).forEach(function(t){var i=e.media[t];Object.keys(i).forEach(function(a){var n=i[a],r=i[a].media;r.addEventListener("loadeddata",function(){e.media[t][a].waitPlay&&r.play(),n.canPlay=!0,e.media[t][a]=n},!1),r.load()})})}},{key:"media",value:function(){return this.media[this.current_page]}},{key:"stop",value:function(){if(null!==this.current_playing&&this.media[this.current_playing]){var e=this.media[this.current_playing];Object.keys(e).forEach(function(t){e[t].media.stop()})}this.current_playing=null}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),SwipePage=function(){function e(t,n,i){_classCallCheck(this,e),n&&(t=SwipeParser.inheritProperties(t,n)),this.page=t,this.scene=n,this.index=i,this.elements=[],this.duration=this.page.duration?1e3*this.page.duration:200,this.bc=this.page.bc||"#ffffff",this.play_style=this.page.play||"auto",this.transition=this.page.transition||("scroll"==this.play_style?"replace":"scroll")}return _createClass(e,[{key:"loadElement",value:function(){var e=this;this.page.elements&&this.page.elements.forEach(function(t,n){e.elements.push(new SwipeElement(t,e.index,n,e.play_style,e.duration))})}},{key:"elementLoad",value:function(e){var t=[],n=this;return t.push(e),e.elements&&e.elements.forEach(function(i,s){n.elementLoad(i).forEach(function(n,i){var s=Object.assign({},e);delete s.elements,t.push($.extend(!0,s,n))})}),t}},{key:"getHtml",value:function(){var e=[];return this.elements.forEach(function(t,n){e.push(t.html())}),"<div id='page_"+this.index+"' class='page' __page_id='"+this.index+"'>"+e.join("")+"</div>"}},{key:"getBc",value:function(){return this.bc}},{key:"getTransition",value:function(){return this.transition}},{key:"getPlayStyle",value:function(){return this.play_style}},{key:"initElement",value:function(e){var t=e.split("-");1==t.length?this.elements[e].initData():this.elements[t.shift()].initData(t.join("-"))}},{key:"getElement",value:function(e){var t=e.split("-");return 1==t.length?this.elements[e].getElement():this.elements[t.shift()].getElement(t.join("-"))}},{key:"resize",value:function(){this.elements.forEach(function(e,t){e.resize()})}},{key:"justShow",value:function(){this.elements.forEach(function(e,t){e.justShow()})}},{key:"show",value:function(){var e=this;this.elements.forEach(function(e,t){e.show()}),setTimeout(function(){e.speech(e)},this.duration)}},{key:"animateShow",value:function(){this.elements.forEach(function(e,t){e.animateShow()})}},{key:"animateShowBack",value:function(){this.elements.forEach(function(e,t){e.animateShowBack()})}},{key:"delayShow",value:function(){var e=this;this.elements.forEach(function(e,t){e.delayShow()}),setTimeout(function(){e.speech(e)},this.duration)}},{key:"back",value:function(){var e=this;this.elements.forEach(function(e,t){e.back()}),setTimeout(function(){e.speech(e)},this.duration)}},{key:"finShow",value:function(){this.elements.forEach(function(e,t){e.finShow()})}},{key:"prevShow",value:function(){this.elements.forEach(function(e,t){e.prevShow()})}},{key:"pause",value:function(){this.elements.forEach(function(e,t){e.pause()})}},{key:"doLoopProcess",value:function(){this.elements.forEach(function(e,t){e.doLoopProcess()})}},{key:"getScene",value:function(){return this.scene}},{key:"speech",value:function(e){var t=window.navigator.userAgent.toLowerCase();t.indexOf("chrome")==-1&&t.indexOf("safari")==-1||e.page.speech&&speechSynthesis.speak(new SpeechSynthesisUtterance(e.page.speech.text))}},{key:"active",value:function(){this.elements.forEach(function(e,t){e.active()})}},{key:"inactive",value:function(){this.elements.forEach(function(e,t){e.inactive()})}}]),e}();
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),SwipeParser=function(){function e(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,e)}return _createClass(e,null,[{key:"parseColor",value:function(e,r){return e&&e.color?e.color:e&&e.textColor?e.textColor:r}},{key:"transformedPath",value:function(){}},{key:"parseTransform",value:function(){}},{key:"is",value:function(e,r){var n=Object.prototype.toString.call(r).slice(8,-1);return void 0!==r&&null!==r&&n===e}},{key:"inheritProperties",value:function(r,n){var t=e.clone(r),i={};if(n){var o=e.clone(n);$.each(o,function(r,n){var o=e.clone(n);null==t[r]?t[r]=o:e.is("Array",t[r])&&e.is("Array",o)&&(i={},$.each(o,function(r,n){e.is("String",n.id)&&(i[n.id]=r)}),t[r].forEach(function(r,n){e.is("String",r.id)&&null!=(n=i[r.id])?o[n]=e.inheritProperties(r,o[n]):o.push(r)}),t[r]=o)})}return t}},{key:"localizedStringForKey",value:function(r){var n,t={};if(n=t.strings){var i=n[r];return e.localizedString(i,"ja")}return""}},{key:"localizedString",value:function(e,r){return e[r]?e[r]:e["*"]}},{key:"parseFontSize",value:function(r,n,t,i){var o=i?"size":"fontSize";return r[o]?e.parseSize(r[o],n,t):t}},{key:"parseSize",value:function(r,n,t){return Number.isInteger(r)?r:isFinite(r)?r:e.parsePercent(r,n,t)}},{key:"parsePercent",value:function(e,r,n){var t=/^([0-9][0-9\\.]*)%$/,i=e.match(t);return i?Math.floor(i[1])/100*r:n}},{key:"parseFontName",value:function(e,r){var n=r?"name":"fontName";if(e){var t=e[n];if("string"===jQuery.type(t))return t;if("array"===jQuery.type(t))return t.join(",")}return"sans-serif, Helvetica"}},{key:"parseShadow",value:function(r){var n=arguments.length<=1||void 0===arguments[1]?1:arguments[1],t=e.parseSize((r.offset||[])[0],SwipeScreen.swipeheight(),1)*n;t=SwipeScreen.virtualX(t);var i=e.parseSize((r.offset||[])[1],SwipeScreen.swipewidth(),1)*n;i=SwipeScreen.virtualY(i);var o=r.color||"black";return t+"px "+i+"px 3px "+o}},{key:"clone",value:function(r){var n;if(null==r||"object"!=("undefined"==typeof r?"undefined":_typeof(r)))return r;if(r instanceof Date)return n=new Date,n.setTime(r.getTime()),n;if(r instanceof Array){n=[];for(var t=0,i=r.length;t<i;t++)n[t]=e.clone(r[t]);return n}if(r instanceof Object){n={};for(var o in r)r.hasOwnProperty(o)&&(n[o]=e.clone(r[o]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")}}]),e}();
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,t){for(var h=0;h<t.length;h++){var e=t[h];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(t,h,e){return h&&i(t.prototype,h),e&&i(t,e),t}}(),SwipeScreen=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"getSize",value:function(){return this.size?this.size:100}},{key:"setSize",value:function(i){this.size=i}},{key:"init",value:function(t,h){this.width=t,this.height=h,0==this.width&&(this.width=this.height*$(window).width()/$(window).height()),0==this.height&&(this.height=this.width*$(window).height()/$(window).width()),i.setOriginalSize(),i.setVirtualSize()}},{key:"setOriginalSize",value:function(){this.window_width=$(window).width(),this.window_height=$(window).height()}},{key:"setVirtualSize",value:function(){var i=this.window_width/this.window_height,t=this.width/this.height;this.ration=1,i/t>=1?(this.virtual_height=$(window).height(),this.virtual_width=this.width/this.height*this.virtual_height):(this.virtual_width=$(window).width(),this.virtual_height=this.height/this.width*this.virtual_width),this.size&&(this.virtual_width=this.virtual_width*this.size/100,this.virtual_height=this.virtual_height*this.size/100),this.ration=this.virtual_width/this.width}},{key:"getRation",value:function(){return this.ration}},{key:"swipewidth",value:function(){return this.width}},{key:"swipeheight",value:function(){return this.height}},{key:"virtualwidth",value:function(){return this.virtual_width}},{key:"virtualheight",value:function(){return this.virtual_height}},{key:"refresh",value:function(){i.setOriginalSize(),i.setVirtualSize()}},{key:"virtualX",value:function(i){return void 0==i?this.virtual_width:this.width?i/this.width*this.virtual_width:i}},{key:"virtualY",value:function(i){return void 0==i?this.virtual_height:this.height?i/this.height*this.virtual_height:i}}]),i}();
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),SwipeTouch=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"init",value:function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.startY=0,this.currentY=0,this.diff=0,this.ration=0,this.options=n,this.status="stop";var e=(n.dom?n.dom:window,"onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"),o=this;$(window).on("scrollstart",function(n){var e=n.originalEvent.clientY?n.originalEvent.clientY:event.changedTouches[0].pageY;o.currentY=e,o.startY=e,t.start_event(n)}).on(e,function(n){n.preventDefault();var e=n.originalEvent.deltaY?-n.originalEvent.deltaY:n.originalEvent.wheelDelta?n.originalEvent.wheelDelta:-n.originalEvent.detail;e||0===e?o.currentY=o.currentY-e:o.currentY=event.changedTouches[0].pageY,o.diff=o.currentY-o.startY,o.ration=o.diff/$(window).innerHeight(),o.ration>1&&(o.ration=1),o.ration<-1&&(o.ration=-1),t.scroll_event_handler(n,o.ration)}).on("scrollstop",function(n){t.stop_event(n)}).on("touchstart",function(n){var e=n.originalEvent.clientY?n.originalEvent.clientY:event.changedTouches[0].pageY;o.startY=e,t.start_event(n)}).on("touchmove.noScroll",function(n){n.preventDefault();var e=n.originalEvent&&n.originalEvent.pageY?n.originalEvent.pageY:event.changedTouches[0].pageY;o.diff=o.startY-e,o.ration=o.diff/$(window).innerHeight(),t.scroll_event_handler(n,o.ration)}).on("touchend",function(n){t.stop_event(n)})}},{key:"scroll_event_handler",value:function(t,n){console.log("scroll"),this.status="scroll",this.options.scroll_callback&&this.options.scroll_callback(t,n)}},{key:"stop_event",value:function(t){console.log("stop"),this.status="stop",this.options.stop_callback&&this.options.stop_callback(t,this.ration)}},{key:"getRation",value:function(){return this.ration}},{key:"start_event",value:function(){this.ration=0,console.log("start"),this.status="start",this.options.start_callback&&this.options.start_callback(event,this.ration)}},{key:"getStatus",value:function(){return this.status}}]),t}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),SwipeUtil=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getParameterByName",value:function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),o=n.exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}},{key:"initSwipe",value:function(e,n,o){$(document.body).css({margin:0,padding:0,"background-color":"#fff","font-size":"26px"}),$("div").css({margin:0,padding:0,"background-color":"#fff","font-size":"26px"});var i=0;location.hash&&(i=Number(location.hash.substr(1)));var a=new SwipeBook(e,i,n,o);if(this.swipe_book=a,$(n).on("click",function(){a.next()}),$(window).on("hashchange",function(){"#"+a.getStep()!=location.hash&&a.show(Number(location.hash.substr(1)))}),$(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){a.resize()},250)}),"1"===t.getParameterByName("autoplay")){var s=t.getParameterByName("autoplayDuration")||1e3;console.log("duatio "+s);var r=function e(){setTimeout(function(){a.next();var n=Number(location.hash.substr(1));console.log(a.getPageSize()),a.getPageSize()>n+1?e():"1"===t.getParameterByName("autoloop")&&setTimeout(function(){a.show(0),e()},s)},s)};r()}}},{key:"getSwipeBook",value:function(){return this.swipe_book}},{key:"merge",value:function(t,e){for(var n={},o=Object.keys(t),i=0;i<o.length;i++)n[o[i]]=t[o[i]];for(o=Object.keys(e),i=0;i<o.length;i++)n[o[i]]=e[o[i]];return n}},{key:"initTouchSwipe",value:function(e){$(document.body).css({margin:0,padding:0,"background-color":"#fff","font-size":"26px"}),$("div").css({margin:0,padding:0,"background-color":"#fff","font-size":"26px"}),$("#swipe_back").css({"touch-action":"none"});var n=new SwipeBook(e,0,"#swipe","#swipe_back");this.swipe_book=n,this.ration=null,$(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){n.resize()},250)}),$.extend($.easing,{swipe:function(e,n,o,i,a){return Math.abs(t.getRation())},swipeangle:function(e,n,o,i,a){return o+Math.abs(t.getRation())*i}}),SwipeTouch.init({start_callback:t.start_event,scroll_callback:t.scroll_event_handler,stop_callback:t.stop_event})}},{key:"getRation",value:function(){return this.ration}},{key:"setRation",value:function(t){this.ration=t}},{key:"getStatus",value:function(){return this.status}},{key:"setStatus",value:function(t){this.status=t}},{key:"start_event",value:function(e,n){t.getSwipeBook();"stopping"==t.getStatus()&&t.stop(),this.ration=0,console.log("start ration "+String(n)),t.setStatus("start")}},{key:"scroll_event_handler",value:function(e,n){var o="start";t.setRation(n),n>0&&(o="forward"),n<0&&(o="back");var i=t.getSwipeBook();o!=t.getStatus()&&("forward"==o&&("back"==t.getStatus()&&i.prevHide(),i.nextStart(n)),"back"==o&&("forward"==t.getStatus()&&i.nextHide(),i.prevStart(n)),t.setStatus(o)),i.view(n)}},{key:"stop_event",value:function(e,n){t.setRation(n),n>0?(t.setStatus("stopping"),t.go_ration(.1)):(t.setStatus("stopping"),t.go_ration(-.1))}},{key:"stop",value:function(){var e=t.getSwipeBook();t.setStatus("stop"),this.ration>0?(t.setRation(1),e.nextEnd()):this.ration<0&&(t.setRation(-1),e.prevEnd())}},{key:"go_ration",value:function(e){if("stopping"==t.getStatus()){this.ration=this.ration+e;var n=t.getSwipeBook();if(Math.abs(this.ration)>1)t.stop();else{var n=t.getSwipeBook();n.view(this.ration),setTimeout(function(){t.go_ration(e)},10)}}}}]),t}();